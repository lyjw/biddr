<div class="well">
  <h2><%= @auction.title %></h2>
  <p><%= @auction.details %></p>

  <hr>
  Reserve Price: <%= number_to_currency(@auction.reserve_price) %><br>
  Current Price: <%= number_to_currency(@auction.current_price) %>

  <hr>
  Status: <%= @auction.published? ? "Ongoing" : "Draft" %>

  <% if can? :publish, @auction %>
    <% if @auction.draft? %>
      <%= link_to auction_publish_path(@auction), method: :post do %>
        <button type="button" name="button" class="btn btn-success">Publish</button>
      <% end %>
    <% else %>
      <%= link_to auction_unpublish_path(@auction), method: :post do %>
        <button type="button" name="button" class="btn btn-danger">Unpublish</button>
      <% end %>
    <% end %>
  <% end %>

</div>

<% if can? :bid, @auction %>
<%= simple_form_for [@auction, @bid] do |f| %>
  <%= f.input :bid_price, label: false, input_html: { class: 'bid-form' } %>
  <%= f.submit class: "btn btn-default", id: 'bid-submit' %>
<% end %>

<% end %>

<h4>Previous Bids</h4>

<% if @ordered_bids %>
  <% @ordered_bids.each do |bid| %>
    <%= number_to_currency(bid.bid_price) %> on <%= formatted_date(bid.created_at) %>  by <%= link_to bid.bidder, user_path(bid.user) %>
    <hr>
  <% end %>
<% else %>
  There are currently no bids.
<% end %>
