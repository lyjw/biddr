<div class="well">
  <h2><%= @auction.title %></h2>
  <p><%= @auction.details %></p>

  <hr>
  Current Price: <%= @auction.reserve_price %>

  <hr>
  Status: <%= @auction.published? ? "Ongoing" : "Draft" %>

  <% if can? :publish, @auction %>
    <% if @auction.draft? %>
      <%= link_to auction_publish_path(@auction), method: :post do %>
        <button type="button" name="button" class="btn btn-success">Publish</button>
      <% end %>
    <% else %>
      <%= link_to auction_unpublish_path(@auction), method: :post do %>
        <button type="button" name="button" class="btn btn-danger">Unpublish</button>
      <% end %>
    <% end %>
  <% end %>

</div>

<% if can? :bid, @auction %>
  <%= render 'bid_form' %>
<% end %>

<h4>Previous Bids</h4>

<% if @ordered_bids.length > 0 %>
  <% @ordered_bids.each do |bid| %>
    <%= number_to_currency(bid.bid_price) %> on <%= formatted_date(bid.created_at) %> by <%= bid.bidder ? bid.bidder : "Anonymous" %>
    <hr>
  <% end %>
<% else %>
  There are currently no bids.
<% end %>
